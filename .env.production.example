# Production Environment Configuration Template
# Copy this file to .env.production and fill in your actual values
# IMPORTANT: Never commit .env.production to version control
#
# ============================================
# CRITICAL: BUILD-TIME vs RUNTIME VARIABLES
# ============================================
# NEXT_PUBLIC_* variables are embedded in the JavaScript bundle AT BUILD TIME
# If you change them, you MUST rebuild the Docker image!
#
# Server-side variables (without NEXT_PUBLIC_) are read AT RUNTIME
# These can be changed without rebuilding

# ============================================
# Docker Build Configuration
# ============================================
# Path to the project repository (if different from docker-compose location)
# Leave commented to use the same directory as docker-compose.yml
# BUILD_CONTEXT=/path/to/ptnextjs

# ============================================
# Node.js Environment (RUNTIME)
# ============================================
NODE_ENV=production
PORT=3000

# ============================================
# Database Configuration (RUNTIME)
# ============================================
# PostgreSQL (recommended for production)
DATABASE_URL=postgresql://ptnextjs:your-secure-password@postgres:5432/ptnextjs
USE_POSTGRES=true

# PostgreSQL Docker Configuration
POSTGRES_USER=ptnextjs
POSTGRES_PASSWORD=your-secure-password-change-this
POSTGRES_DB=ptnextjs
POSTGRES_DATA_PATH=/var/lib/ptnextjs/postgres

# Alternative: SQLite (for simple deployments)
# DATABASE_URL=file:///data/payload.db
# USE_POSTGRES=false

# ============================================
# Application URLs (BUILD-TIME - requires rebuild if changed)
# ============================================
# Public-facing URL for the application
# Used by Payload CMS and client-side code
# Replace with your actual domain
NEXT_PUBLIC_SERVER_URL=https://yourdomain.com
NEXT_PUBLIC_SITE_URL=https://yourdomain.com
NEXT_PUBLIC_BASE_URL=https://yourdomain.com

# ============================================
# Payload CMS Security (RUNTIME)
# ============================================
# Secret key for JWT tokens and encryption
# MUST be at least 32 characters long
# Generate with: openssl rand -hex 32
PAYLOAD_SECRET=your-secret-key-here-minimum-32-characters-change-this

# ============================================
# JWT Configuration
# ============================================
# Access token expiration (short-lived)
JWT_ACCESS_TOKEN_EXPIRY=1h

# Refresh token expiration (long-lived)
JWT_REFRESH_TOKEN_EXPIRY=7d

# ============================================
# Initial Admin User
# ============================================
# These credentials create the first admin user
# Change immediately after first login
ADMIN_EMAIL=admin@yourdomain.com
ADMIN_PASSWORD=change-this-secure-password

# ============================================
# hCaptcha Configuration
# ============================================
# Sign up at https://www.hcaptcha.com/
# Used for spam protection on registration and review forms
# IMPORTANT: Site key is BUILD-TIME, Secret key is RUNTIME
# Both must be set together - if secret is set, site key must be in the build!
NEXT_PUBLIC_HCAPTCHA_SITE_KEY=your-hcaptcha-site-key
HCAPTCHA_SECRET_KEY=your-hcaptcha-secret-key

# ============================================
# Docker Configuration
# ============================================
# Domain for reverse proxy (Traefik)
DOMAIN=yourdomain.com

# ============================================
# Optional: Email Configuration
# ============================================
# Configure if you want to send emails from Payload CMS
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USER=your-email@example.com
# SMTP_PASS=your-smtp-password
# FROM_EMAIL=noreply@yourdomain.com
# FROM_NAME=Your Application Name

# ============================================
# Optional: Storage Configuration
# ============================================
# If using external storage like S3, configure here
# AWS_ACCESS_KEY_ID=your-aws-access-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret-key
# AWS_REGION=us-east-1
# AWS_BUCKET=your-bucket-name

# ============================================
# Optional: Analytics
# ============================================
# NEXT_PUBLIC_GA_ID=G-XXXXXXXXXX
# NEXT_PUBLIC_PLAUSIBLE_DOMAIN=yourdomain.com

# ============================================
# Optional: Monitoring
# ============================================
# SENTRY_DSN=https://xxx@sentry.io/xxx
# SENTRY_ENVIRONMENT=production
